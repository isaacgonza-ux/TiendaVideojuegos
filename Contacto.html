<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto</title>

    <style>
    :root{
      --bg:#0f1720;
      --card:#0b1220;
      --accent:#ffc107;
      --muted:#94a3b8;
      --danger:#ff6b6b;
      --ok:#34d399;
      --radius:10px;
      --gap:12px;
      color-scheme: dark;
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family: Inter, system-ui, Arial, sans-serif;
      background: linear-gradient(180deg,#071025 0%,#0f1720 100%);
      color:#e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .card{
      width:100%;
      max-width:900px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.15));
      border-radius:var(--radius);
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
      padding:28px;
      box-sizing:border-box;
    }

    h1{ margin:0 0 8px 0; font-size:1.4rem; color:var(--accent); }
    p.lead{ margin:0 0 18px 0; color:var(--muted); }

    form {
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:var(--gap);
      align-items:start;
    }

    /* full width fields (use .full) */
    .full { grid-column: 1 / -1; }

    label {
      display:block;
      font-size:0.85rem;
      margin-bottom:6px;
      color:#dbeafe;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea {
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02);
      color:inherit;
      resize:vertical;
      min-height:40px;
      box-sizing:border-box;
      outline:none;
      transition: box-shadow .18s, border-color .18s, transform .08s;
    }
    input:focus, textarea:focus, select:focus {
      box-shadow: 0 4px 18px rgba(255,193,7,0.07);
      border-color: rgba(255,193,7,0.6);
      transform: translateY(-1px);
    }
    textarea { min-height:140px; padding-top:10px; }

    .row {
      display:flex;
      gap:8px;
    }

    .small {
      font-size:0.82rem;
      color:var(--muted);
    }

    .actions {
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:flex-end;
      grid-column:1 / -1;
      margin-top:4px;
    }

    .btn {
      background:var(--accent);
      color:#08121a;
      border:none;
      padding:10px 16px;
      border-radius:999px;
      cursor:pointer;
      font-weight:600;
      box-shadow: 0 6px 20px rgba(255,193,7,0.12);
    }
    .btn.secondary{
      background:transparent;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.04);
    }

    /* error / success */
    .error {
      border-color: var(--danger) !important;
      box-shadow: 0 6px 18px rgba(255,107,107,0.06);
    }
    .help {
      display:block;
      font-size:0.82rem;
      color:var(--danger);
      margin-top:6px;
      visibility:hidden;
    }
    .help.show { visibility:visible; }

    .field-wrap { display:flex; flex-direction:column; gap:6px; }

    /* success message */
    .success-msg{
      display:none;
      grid-column:1/-1;
      padding:14px;
      border-radius:8px;
      background:linear-gradient(90deg, rgba(52,211,153,0.12), rgba(16,185,129,0.06));
      color:var(--ok);
      font-weight:600;
    }
    .success-msg.show{ display:block; }

    /* responsive */
    @media (max-width:720px){
      form { grid-template-columns: 1fr; }
      .actions{ justify-content:stretch; flex-direction:column-reverse; }
      .btn{ width:100%; }
    }
  </style>
</head>
<body>
    <main class="card" aria-live>
        <h1>CONTACTO</h1>
        <P class="lead">¿Tienes dudas, sugerencias o problemas con tu compra
            ? Escríbenos
        </P>
        <form id="contactForm">
            <!--nombre-->
            <div class="field-wrap">
                <label for="name">Nombre completo <span class="small" aria-hidden="true">(*)</span></label>
                <input id="name" name="name" type="text" placeholder="Humberto Suazo" aria-describedby="nameHelp" required>
                <small id="nameHelp" class="help" role="alert">Debe tener 2-50 caracteres y espacios</small>
            </div>
            <!--email-->
            <div class="field-wrap">
                <label for="email">Correo Electrónico <span class="small" aria-hidden="true">(*)</span></label>
                <input id="email" name="email" type="email" placeholder="humbertosu@gmail.com" aria-describedby="emailHelp" required>
                <small id="emailHelp" class="help" role="alert">Introduce un correo válido</small>
            </div>
            <!--teléfono-->
            <div class="field-wrap">
                <label for="phone">Teléfono (opcional)</label>
                <input id="phone" name="phone" type="tel" placeholder="+56912345678" aria-describedby="phoneHelp">
                <small id="phoneHelp" class="help" role="alert">Número inválido</small>
            </div>
            <!--asunto-->
            <div class="field-wrap">
                <label for="subject">Asunto <span class="small" aria-hidden="true">(*)</span></label>
               <select id="subject" name="subject" aria-describedby="subjectHelp" required>
                <option value="">--Selecciona--</option>
                <option value="pedido">Pedido / Entrega</option>
                <option value="devolución">Devolución</option>
                <option value="soporte">Soporte</option>
                <option value="otros">Otros</option>
               </select>
                <small id="subjectHelp" class="help" role="alert">Selecciona un asunto</small>
            </div>

            <!--mensaje-->
            <div class="field-wrap full">
                <label for="message">Mensaje <span class="small" aria-hidden="true">(*)</span></label>
                <textarea id="message" name="message" placeholder="Escribe tu consulta....." aria-describedby="messageHelp" required minlength="20" maxlength="1200"></textarea>
                <small id="messageHelp" class="help" role="alert">El mensaje debe tener al menos 20 caracteres</small>

            </div>

            <!--Terms-->
            <div class="field-wrap full" style="display: flex;align-items: center;gap: 10px;">
                <input id="consent" name="consent" type="checkbox" aria-describedby="consentHelp" required>
                <label for="consent" class="small" style="margin:0">Acepto ser contactado y he leído la política de privacidad<span aria-hidden="true">(*)</span></label>
                <small id="consentHelp" class="help" role="alert">Debes aceptar antes de continuar</small>
            </div>

            <!--mensaje éxito-->
            <div id="succes" class="succes-msg" role="status" aria-live="polite"></div>

            <!--Actions botón-->
            <div class="actions">
                <button type="button" class="btn-secondary" id="clearBtn"Limpiar></button>
                <button type="submit" class="Btn" id="submitBtn">Enviar mensaje</button>
            </div>
        </form>
    </main>

    <script>
        (function){
            //selección de elementos
            const form = document.getElementById('contactForm');
            const nameField = document.getElementById('name');
            const emailField = document.getElementById('email');
            const phoneField = document.getElementById('phone');
            const subhectField = document.getElementById('subject')
            const messageField = document.getElementById('message');
            const consentField = document.getElementById('consent');
            const successMsg = document.getElementById('succes');
            const clearBtn = document.getElementById('clearBtn');

            //regex rules
            const nameRegex = /^[a-zA-ZÀ-ÿ\s]{2,50}$/;
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            const phoneRegex = /^\+?[0-9\s\-]{7,15}$/;

            //Ayudante: mostrar error debajo de un campo
            function showError(input,message){
                const help = document.getElementById(input.id+'Help');
                input.setAttribute('aria-invalid','true');
                help.textContent = message;
                help.classList.add('error');
            }
        }

        function clearError(input){
            const help = document.getElementById(input.id+'Help');
            input.removeAttribute('aria-invalid');
            help.textContent = '';
            help.classList.remove('error');
            if(help){
                const defaults = {
                    nameHelp: 'Debe tener 2-50 caracteres y espacios',
                    emailHelp: 'Introduce un correo válido',
                    phoneHelp: 'Número inválido',
                    subjectHelp: 'Selecciona un asunto',
                    messageHelp: 'El mensaje debe tener al menos 20 caracteres',
                    consentHelp: 'Debes aceptar antes de continuar'
                };
                const id = help.id;
                help.textContent = defaults[id] || '';
                help.classList.remove('error');
            }

            //Los validadores individuales devuelven verdadero si todo está bien.
            function validateName(){
                const value = nameField.value.trim();
                if(!value){showError(nameField,'El nombre es obligatorio'); return false;}
                if(!nameRegex.test(value)){showError(nameField,'El nombre debe tener 2-50 caracteres y solo letras y espacios'); return false;}
                clearError(nameField); return true;
            }

            function validateEmail(){
                const value = emailField.value.trim();
                if(!value){showError(emailField,'El correo es obligatorio'); return false;}
                if(!emailRegex.test(value)){showError(emailField,'Introduce un correo válido'); return false;}
                clearError(emailField); return true;
            }

            function validatePhone(){
                const value = phoneField.value.trim();
                if(value && !phoneRegex.test(value)){showError(phoneField,'Número inválido'); return false;}
                clearError(phoneField); return true;
            }

            function validateSubject(){
                if(!subjectField.value){showError(subjectField,'Selecciona un asunto'); return false;}
                clearError(subjectField); return true;
            }

            function validateMessage(){
                const value = messageField.value.trim();
                if(!value){showError(messageField,'El mensaje es obligatorio'); return false;}
                if(value.length < 20){showError(messageField,'El mensaje debe tener al menos 20 caracteres'); return false;}
                clearError(messageField); return true;
            }

            function validateConsent(){
                if(!consentField.checked){showError(consentField,'Debes aceptar antes de continuar'); return false;}
                clearError(consentField); return true;
            }



            // Validación en tiempo real al introducir datos o realizar cambios
            nameField.addEventListener('input', validateName);
            emailField.addEventListener('input', validateEmail);
            phoneField.addEventListener('input', validatePhone);
            subjectField.addEventListener('change', validateSubject);
            messageField.addEventListener('input', validateMessage);
            consentField.addEventListener('change', validateConsent);

            // clear button
            clearBtn.addEventListener('click', function(){
                form.reset();
                [nameField,emailField,phoneField,subjectField,messageField,consentField].forEach(clearError);
                successBox.classList.remove('visible');
                successBox.textContent = '';
            });

            // Al enviar el formulario
             form.addEventListener('submit', function(evt){
                evt.preventDefault();
                
                const ok = [
                validateName(),
                validateEmail(),
                validatePhone(),
                validateSubject(),
                validateMessage(),
                validateConsent()
                ].every(Boolean);

                if(!ok){
                // focus first invalid
                const firstInvalid = form.querySelector('.error, [aria-invalid="true"]');
                if(firstInvalid) firstInvalid.focus();
                return;
                }

                 // Build payload (what you would send to backend)
                const payload = {
                name: nameField.value.trim(),
                email: emailField.value.trim(),
                phone: phoneField.value.trim(),
                subject: subjectField.value,
                message: messageField.value.trim()
                };

                // Show optimistic success (in real app, send to server and await response)
                successBox.textContent = 'Enviando mensaje...';
                successBox.classList.add('show');

                // simular llamada de red
                setTimeout(() => {
                successBox.textContent = '¡Mensaje enviado! Te responderemos en menos de 24h.';
                // restablecer opcionalmente
                form.reset();
                  // borrar errores visuales
                [nameField,emailField,phoneField,subjectField,messageField,consentField].forEach(clearError);
                }, 900);

        });
         form.setAttribute('novalidate','');
    </script>    
    
</body>
</html>